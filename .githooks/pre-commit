#!/bin/bash

echo "ğŸ” Running Laravel Pint (code style checker)..."

# Run Laravel Pint to check code style
./vendor/bin/pint --test
PINT_STATUS=$?

if [ $PINT_STATUS -ne 0 ]; then
    echo "âŒ Code style issues found! Fix them before committing."
    exit 1  # Prevent commit
fi

echo "âœ… Code style check passed!"


echo "ğŸ” Running PHPStan (static analysis)..."

# Run PHPStan (ensure it's installed)
./vendor/bin/phpstan analyse --configuration=phpstan.neon
PHPSTAN_STATUS=$?

if [ $PHPSTAN_STATUS -ne 0 ]; then
    echo "âŒ PHPStan found issues! Fix them before committing."
    exit 1  # Prevent commit
fi

echo "âœ… PHPStan analysis passed!"

exit 0  # Allow commit
